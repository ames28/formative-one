{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"searchbar\"\n};\nconst _hoisted_3 = {\n  class: \"search-content\"\n};\n\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"p\", null, \"Top Headlines from:\", -1\n/* HOISTED */\n);\n\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"nz\"\n}, \"New Zealand\", -1\n/* HOISTED */\n);\n\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"au\"\n}, \"Australia\", -1\n/* HOISTED */\n);\n\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"us\"\n}, \"United States\", -1\n/* HOISTED */\n);\n\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"gb\"\n}, \"Great Britian\", -1\n/* HOISTED */\n);\n\nconst _hoisted_9 = [_hoisted_5, _hoisted_6, _hoisted_7, _hoisted_8];\nconst _hoisted_10 = {\n  class: \"search-content\"\n};\nconst _hoisted_11 = {\n  key: 1,\n  class: \"fas fa-spinner fa-spin\"\n};\nconst _hoisted_12 = {\n  class: \"article-results\"\n};\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = [\"src\"];\nconst _hoisted_15 = {\n  key: 1,\n  class: \"fas fa-image\"\n};\nconst _hoisted_16 = {\n  class: \"articleText\"\n};\n\nconst _hoisted_17 = /*#__PURE__*/_createElementVNode(\"footer\", null, [/*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"pointer artButton\"\n}, \"View Article\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_18 = {\n  ref: \"infinitescrolltrigger\",\n  id: \"scroll-trigger\"\n};\nconst _hoisted_19 = {\n  key: 0,\n  class: \"fas fa-spinner fa-spin\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createElementVNode(\"select\", {\n    onChange: _cache[0] || (_cache[0] = $event => $options.selectCountry())\n  }, _hoisted_9, 32\n  /* HYDRATE_EVENTS */\n  ), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = $event => $options.filterNews(_ctx.event))\n  }, \"confirm\")]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"form\", {\n    onSubmit: _cache[3] || (_cache[3] = _withModifiers((...args) => $options.searchNewsFunction && $options.searchNewsFunction(...args), [\"prevent\"]))\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    placeholder: \"search...\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.searchword = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.searchword]])], 32\n  /* HYDRATE_EVENTS */\n  ), !$data.isBusy ? (_openBlock(), _createElementBlock(\"i\", {\n    key: 0,\n    class: \"fas fa-search pointer\",\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.searchNewsFunction && $options.searchNewsFunction(...args))\n  })) : (_openBlock(), _createElementBlock(\"i\", _hoisted_11)), _createElementVNode(\"i\", {\n    class: \"fas fa-times pointer\",\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.getTopNews && $options.getTopNews(...args))\n  })])]), _createElementVNode(\"div\", _hoisted_12, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.articles, (article, index) => {\n    return _openBlock(), _createElementBlock(\"article\", {\n      key: index,\n      onClick: $event => $options.navTo(article.url),\n      class: \"pointer\"\n    }, [_createElementVNode(\"header\", null, [article.urlToImage ? (_openBlock(), _createElementBlock(\"img\", {\n      key: 0,\n      src: article.urlToImage,\n      alt: \"\"\n    }, null, 8\n    /* PROPS */\n    , _hoisted_14)) : (_openBlock(), _createElementBlock(\"i\", _hoisted_15))]), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"h3\", null, _toDisplayString(article.title), 1\n    /* TEXT */\n    ), _createElementVNode(\"h5\", null, _toDisplayString(article.author) + \" || \" + _toDisplayString(article.source.name), 1\n    /* TEXT */\n    ), _createElementVNode(\"p\", null, _toDisplayString(article.description), 1\n    /* TEXT */\n    )]), _hoisted_17], 8\n    /* PROPS */\n    , _hoisted_13);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))]), _createElementVNode(\"div\", _hoisted_18, [$data.showLoader ? (_openBlock(), _createElementBlock(\"i\", _hoisted_19)) : _createCommentVNode(\"v-if\", true)], 512\n  /* NEED_PATCH */\n  )]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","value","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","ref","id","_createElementBlock","_hoisted_4","onChange","$options","onClick","_ctx","onSubmit","type","placeholder","$data","$event","_Fragment","_renderList","article","index","key","url","urlToImage","src","alt","_toDisplayString","title","author","source","name","description","_hoisted_17"],"sourceRoot":"","sources":["/Users/amyweb/Documents/GitHub/formative-one/src/components/News.vue"],"sourcesContent":["<template>\n    <div class=\"container\">\n        <div class=\"searchbar\">\n            \n            <div class=\"search-content\">\n                <p>Top Headlines from:</p>\n                <select @change=\"selectCountry()\">\n                    <option value=\"nz\">New Zealand</option>\n                    <option value=\"au\">Australia</option>\n                    <option value=\"us\">United States</option>\n                    <option value=\"gb\">Great Britian</option>\n                </select>\n                <button @click=\"filterNews(event)\">confirm</button>\n            </div>\n\n            <div class=\"search-content\">\n                <form @submit.prevent=\"searchNewsFunction\">\n                <input type=\"text\" placeholder=\"search...\" v-model=\"searchword\">\n                 </form>\n                    <i v-if=\"!isBusy\" class=\"fas fa-search pointer\" @click=\"searchNewsFunction\"></i>\n                    <i v-else class=\"fas fa-spinner fa-spin\"></i>\n                    <i class=\"fas fa-times pointer\" @click=\"getTopNews\"></i>\n                \n            </div>\n                \n        </div>\n        <div class=\"article-results\">\n           <article v-for=\"(article, index) in articles\" :key=\"index\" @click=\"navTo(article.url)\" class=\"pointer\">\n                <header>\n                    <img v-if=\"article.urlToImage\" :src=\"article.urlToImage\" alt=\"\">\n                    <i v-else class=\"fas fa-image\"></i>\n                    \n                </header>\n                <div class=\"articleText\">\n                    <h3>{{article.title}}</h3>\n                    <h5>{{article.author}} || {{article.source.name}}</h5>\n                    <p>{{article.description}}</p></div>\n                \n                <footer>\n                <button class=\"pointer artButton\">View Article</button>\n                </footer>\n           </article>\n        </div>\n        <div ref=\"infinitescrolltrigger\" id=\"scroll-trigger\">\n            <i v-if=\"showLoader\" class=\"fas fa-spinner fa-spin\"></i>\n\n        </div>\n    </div>\n</template>\n\n<script>\n\n\nexport default{\n    name: 'NewsApp',\n    props: ['apiKey'],\n    data(){\n        return{\n            apiUrl: '',\n            isBusy: false,\n            showLoader: false,\n            currentPage: 1,\n            totalResults: 0,\n            maxPerPage: 10,\n            searchword: '',\n            articles: [],\n            filterCountry: '',\n            \n        }\n    },\n    computed:{\n        pageCount(){\n            return Math.ceil(this.totalResults/this.maxPerPage);\n        }\n    },\n    methods: {\n        navTo(url){\n            window.open(url);\n        },\n        resetData(){\n        this.currentPage = 1;\n        this.articles = [];\n        },\n        selectCountry(){\n            this.filterCountry = event.target.value;\n            console.log(\"country = \" + this.filterCountry);\n        },\n        searchNewsFunction() {\n            if(this.searchword !== '') {\n                this.apiUrl = 'https://newsapi.org/v2/everything?q=' + this.searchword + '&pageSize=' + this.maxPerPage + '&apiKey=' + this.apiKey;\n                this.isBusy = true;\n\n                this.resetData();\n                this.fetchData();\n            }\n            else{\n                this.getTopNews();\n            }\n            \n        },\n        filterNews() {\n            this.apiUrl = 'https://newsapi.org/v2/top-headlines?country=' + this.filterCountry + '&pageSize=' + this.maxPerPage + '&apiKey=' + this.apiKey;\n            this.isBusy = true;\n            this.searchword = '';\n\n            if(this.searchword !== '') {\n                this.apiUrl = 'https://newsapi.org/v2/top-headlines?country=' + this.filterCountry + '&q=' + this.searchword + '&pageSize=' + this.maxPerPage + '&apiKey=' + this.apiKey;\n                this.isBusy = true;\n            }\n\n            this.resetData();\n            this.fetchData();\n        },\n        getTopNews() {\n            \n            this.apiUrl = 'https://newsapi.org/v2/top-headlines?country=nz&pageSize=' + this.maxPerPage + '&apiKey=' + this.apiKey;\n            this.isBusy = true;\n            this.searchword = '';\n\n            this.resetData();\n            this.fetchData();\n           \n        },\n        fetchData(){\n            let req = new Request(this.apiUrl + '&page=' + this.currentPage);\n            fetch(req)\n                .then((resp) => resp.json())\n                .then((data) => {\n                    this.totalResults = data.totalResults;\n                    data.articles.forEach(element => {\n                        this.articles.push(element);\n                    });\n                    this.isBusy = false;\n                    this.showLoader = false;\n                })\n                .catch((error) => {\n                    console.error(error);\n                });\n        },\n        scrollTrigger(){\n            const observer = new IntersectionObserver((entries) => {\n                entries.forEach(entry => {\n                    if(entry.intersectionRatio > 0 && this.currentPage < this.pageCount) {\n                        this.showLoader = true;\n                        this.currentPage += 1;\n                        this.fetchData();\n                    }\n                })\n            });\n\n            observer.observe(this.$refs.infinitescrolltrigger);\n        }\n    },\n    created() {\n        this.getTopNews();\n    },\n    mounted(){\n        this.scrollTrigger();\n    }\n}\n\n</script>\n\n<style>\n\n.container{\n    margin: 0 auto;\n}\n\n.searchbar{\n    display: flex;\n    flex-direction: row;\n    justify-content: space-around;\n    align-items: center;\n    padding: 10px 0;\n    background: blueviolet;\n    color: white;\n}\n\n.search-content{\n    width: 30%;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-around;\n    align-items: center;\n}\n\n  select{\n    height: 80%;\n    margin: 0 auto;\n    width: 40%;\n  }\n\n  form{\n    width: 77%;\n  }\n\n  input{\n    width: 100%;\n  }\n\n.article-results{\n    width: 90%;\n    text-align: center;\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: space-evenly;\n    padding-top: 10px;\n    row-gap: 15px;\n    margin: 0 auto;\n    padding-top: 20px;\n}\n\n.articleText{\n    padding: 10px;\n}\n\narticle{\n    border: 1px solid black;\n    width: 30%;\n}\n\nh3{\n    color:blueviolet\n}\n\n.artButton{\n    color: blueviolet;\n    background-color: white;\n    border: none;\n    padding: 15px 32px;\n    text-align: center;\n    text-decoration: none;\n    display: inline-block;\n    font-size: 16px;\n}\n\nimg {\n    width: 100%;\n  }\n\n  #scroll-trigger{\n\ndisplay: flex;\n\njustify-content: center;\n\nwidth: 100%;\n\nheight: 100%;\n\n}\n\n</style>"]},"metadata":{},"sourceType":"module"}