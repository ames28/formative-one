{"ast":null,"code":"export default {\n  name: 'NewsApp',\n  props: ['apiKey'],\n\n  data() {\n    return {\n      apiUrl: '',\n      isBusy: false,\n      showLoader: false,\n      currentPage: 1,\n      totalResults: 0,\n      maxPerPage: 10,\n      searchword: '',\n      articles: [],\n      filterCountry: ''\n    };\n  },\n\n  computed: {\n    pageCount() {\n      return Math.ceil(this.totalResults / this.maxPerPage);\n    }\n\n  },\n  methods: {\n    navTo(url) {\n      window.open(url);\n    },\n\n    resetData() {\n      this.currentPage = 1;\n      this.articles = [];\n    },\n\n    selectCountry() {\n      this.filterCountry = event.target.value;\n      console.log(\"country = \" + this.filterCountry);\n    },\n\n    searchNewsFunction() {\n      if (this.searchword !== '') {\n        this.apiUrl = 'https://newsapi.org/v2/everything?q=' + this.searchword + '&pageSize=' + this.maxPerPage + '&apiKey=' + this.apiKey;\n        this.isBusy = true;\n        this.resetData();\n        this.fetchData();\n      } else {\n        this.getTopNews();\n      }\n    },\n\n    filterNews() {\n      this.apiUrl = 'https://newsapi.org/v2/top-headlines?country=' + this.filterCountry + '&pageSize=' + this.maxPerPage + '&apiKey=' + this.apiKey;\n      this.isBusy = true;\n      this.searchword = '';\n\n      if (this.searchword !== '') {\n        this.apiUrl = 'https://newsapi.org/v2/top-headlines?country=' + this.filterCountry + '&q=' + this.searchword + '&pageSize=' + this.maxPerPage + '&apiKey=' + this.apiKey;\n        this.isBusy = true;\n      }\n\n      this.resetData();\n      this.fetchData();\n    },\n\n    getTopNews() {\n      this.apiUrl = 'https://newsapi.org/v2/top-headlines?country=nz&pageSize=' + this.maxPerPage + '&apiKey=' + this.apiKey;\n      this.isBusy = true;\n      this.searchword = '';\n      this.resetData();\n      this.fetchData();\n    },\n\n    fetchData() {\n      let req = new Request(this.apiUrl + '&page=' + this.currentPage);\n      fetch(req).then(resp => resp.json()).then(data => {\n        this.totalResults = data.totalResults;\n        data.articles.forEach(element => {\n          this.articles.push(element);\n        });\n        this.isBusy = false;\n        this.showLoader = false;\n      }).catch(error => {\n        console.error(error);\n      });\n    },\n\n    scrollTrigger() {\n      const observer = new IntersectionObserver(entries => {\n        entries.forEach(entry => {\n          if (entry.intersectionRatio > 0 && this.currentPage < this.pageCount) {\n            this.showLoader = true;\n            this.currentPage += 1;\n            this.fetchData();\n          }\n        });\n      });\n      observer.observe(this.$refs.infinitescrolltrigger);\n    }\n\n  },\n\n  created() {\n    this.getTopNews();\n  },\n\n  mounted() {\n    this.scrollTrigger();\n  }\n\n};","map":{"version":3,"mappings":"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","names":["name","props","data","apiUrl","isBusy","showLoader","currentPage","totalResults","maxPerPage","searchword","articles","filterCountry","computed","pageCount","Math","ceil","methods","navTo","url","window","open","resetData","selectCountry","event","target","value","console","log","searchNewsFunction","apiKey","fetchData","getTopNews","filterNews","req","Request","fetch","then","resp","json","forEach","element","push","catch","error","scrollTrigger","observer","IntersectionObserver","entries","entry","intersectionRatio","observe","$refs","infinitescrolltrigger","created","mounted"],"sourceRoot":"","sources":["/Users/amyweb/Documents/GitHub/formative-one/src/components/News.vue"],"sourcesContent":["<template>\n    <div class=\"container\">\n        <div class=\"searchbar\">\n            \n            <div class=\"search-content\">\n                <p>Top Headlines from:</p>\n                <select @change=\"selectCountry()\">\n                    <option value=\"nz\">New Zealand</option>\n                    <option value=\"au\">Australia</option>\n                    <option value=\"us\">United States</option>\n                    <option value=\"gb\">Great Britian</option>\n                </select>\n                <button @click=\"filterNews(event)\" class=\"confirmButton\">confirm</button>\n            </div>\n\n            <div class=\"search-content\">\n                <p>Search News:</p>\n                <form @submit.prevent=\"searchNewsFunction\">\n                <input type=\"text\" placeholder=\"search...\" v-model=\"searchword\">\n                 </form>\n                 <div class=\"icon-container\">\n                    <button class=\"confirmButton\" v-if=\"!isBusy\" @click=\"searchNewsFunction\">Search</button>\n                    <i v-else class=\"fas fa-spinner fa-spin\"></i>\n                    <button class=\"confirmButton\" @click=\"getTopNews\">Reset</button>\n                </div>\n            </div>\n                \n        </div>\n        <div class=\"article-results\">\n           <article v-for=\"(article, index) in articles\" :key=\"index\" @click=\"navTo(article.url)\" class=\"pointer\">\n                <header>\n                    <img v-if=\"article.urlToImage\" :src=\"article.urlToImage\" alt=\"\">\n                    <img v-else src=\"../assets/noimage.png\">\n                    \n                </header>\n                <div class=\"articleText\">\n                    <h3>{{article.title}}</h3>\n                    <h5>{{article.author}} || {{article.source.name}}</h5>\n                    <p>{{article.description}}</p></div>\n                \n                <footer>\n                <button class=\"pointer artButton\">View Article</button>\n                </footer>\n           </article>\n        </div>\n        <div ref=\"infinitescrolltrigger\" id=\"scroll-trigger\">\n            <i v-if=\"showLoader\" class=\"fas fa-spinner fa-spin\"></i>\n\n        </div>\n    </div>\n</template>\n\n<script>\n\n\nexport default{\n    name: 'NewsApp',\n    props: ['apiKey'],\n    data(){\n        return{\n            apiUrl: '',\n            isBusy: false,\n            showLoader: false,\n            currentPage: 1,\n            totalResults: 0,\n            maxPerPage: 10,\n            searchword: '',\n            articles: [],\n            filterCountry: '',\n            \n        }\n    },\n    computed:{\n        pageCount(){\n            return Math.ceil(this.totalResults/this.maxPerPage);\n        }\n    },\n    methods: {\n        navTo(url){\n            window.open(url);\n        },\n        resetData(){\n        this.currentPage = 1;\n        this.articles = [];\n        },\n        selectCountry(){\n            this.filterCountry = event.target.value;\n            console.log(\"country = \" + this.filterCountry);\n        },\n        searchNewsFunction() {\n            if(this.searchword !== '') {\n                this.apiUrl = 'https://newsapi.org/v2/everything?q=' + this.searchword + '&pageSize=' + this.maxPerPage + '&apiKey=' + this.apiKey;\n                this.isBusy = true;\n\n                this.resetData();\n                this.fetchData();\n            }\n            else{\n                this.getTopNews();\n            }\n            \n        },\n        filterNews() {\n            this.apiUrl = 'https://newsapi.org/v2/top-headlines?country=' + this.filterCountry + '&pageSize=' + this.maxPerPage + '&apiKey=' + this.apiKey;\n            this.isBusy = true;\n            this.searchword = '';\n\n            if(this.searchword !== '') {\n                this.apiUrl = 'https://newsapi.org/v2/top-headlines?country=' + this.filterCountry + '&q=' + this.searchword + '&pageSize=' + this.maxPerPage + '&apiKey=' + this.apiKey;\n                this.isBusy = true;\n            }\n\n            this.resetData();\n            this.fetchData();\n        },\n        getTopNews() {\n            \n            this.apiUrl = 'https://newsapi.org/v2/top-headlines?country=nz&pageSize=' + this.maxPerPage + '&apiKey=' + this.apiKey;\n            this.isBusy = true;\n            this.searchword = '';\n\n            this.resetData();\n            this.fetchData();\n           \n        },\n        fetchData(){\n            let req = new Request(this.apiUrl + '&page=' + this.currentPage);\n            fetch(req)\n                .then((resp) => resp.json())\n                .then((data) => {\n                    this.totalResults = data.totalResults;\n                    data.articles.forEach(element => {\n                        this.articles.push(element);\n                    });\n                    this.isBusy = false;\n                    this.showLoader = false;\n                })\n                .catch((error) => {\n                    console.error(error);\n                });\n        },\n        scrollTrigger(){\n            const observer = new IntersectionObserver((entries) => {\n                entries.forEach(entry => {\n                    if(entry.intersectionRatio > 0 && this.currentPage < this.pageCount) {\n                        this.showLoader = true;\n                        this.currentPage += 1;\n                        this.fetchData();\n                    }\n                })\n            });\n\n            observer.observe(this.$refs.infinitescrolltrigger);\n        }\n    },\n    created() {\n        this.getTopNews();\n    },\n    mounted(){\n        this.scrollTrigger();\n    }\n}\n\n</script>\n\n<style>\n\n.container{\n    margin: 0 auto;\n}\n\nimg {\n    width: 100%;\n    border-bottom: 2px solid black;\n  }\n\n.searchbar{\n    display: flex;\n    flex-direction: row;\n    justify-content: space-around;\n    align-items: center;\n    padding: 10px 0;\n    background: blueviolet;\n    color: white;\n    height: 15vh;\n}\n\n.search-content{\n    width: 30%;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-around;\n    align-items: center;\n    padding: 10px 0;\n       height: 100%;\n}\n\n\n  select{\n    margin: 0 auto;\n    width: 80%;\n    background-color: white;\n    border: black 2px solid;\n    height: 30%;\n    box-shadow: 5px 5px black;\n  }\n\n  .confirmButton{\n background-color: white;\n    border: black 2px solid;\n    box-shadow: 5px 5px black;\n  }\n\n  form{\n    width: 100%;\n    height: 40%;\n    \n  }\n\n  input{\n    width: 100%;\n    background-color: white;\n    border: black 2px solid;\n    height: 40%;\n    box-shadow: 5px 5px black;\n  }\n\n  p{margin: 0;}\n\n\n\n  .icon-container{\n    width: 30%;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-around;\n    padding: 5px 0;\n  }\n\n.article-results{\n    width: 100%;\n    text-align: center;\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: space-evenly;\n    row-gap: 30px;\n    margin: 0 auto;\n    padding: 20px 0;\n    background-color: rgb(214, 190, 237);\n}\n\n.articleText{\n    padding: 10px;\n}\n\narticle{\n    border: 2px solid black;\n    box-shadow: 10px 10px black;\n    border-radius: 10px;\n    width: 25%;\n    background-color: white;\n}\n\nh3{\n    color:blueviolet\n}\n\n.artButton{\n    color: blueviolet;\n    background-color: white;\n    border: none;\n    padding: 15px 32px;\n    text-align: center;\n    text-decoration: none;\n    display: inline-block;\n    font-size: 16px;\n}\n\n.artButton:hover{\n    color: black;\n}\n\n#scroll-trigger{\n    display: flex;\n    justify-content: center;\n    width: 100%;\n    height: 100%;\n    background-color: rgb(214, 190, 237);\n    }\n\n@media screen and (max-width: 800px) {\n    \n    h3{\n        font-size: 15px;\n    }\n    p{\n        font-size: 12px;\n    }\n    article{\n        width: 45%;\n    }\n\n.search-content{\n    width: 80%;\n    flex-direction: column;\n\n}\n\n    .searchbar{\n\n        flex-direction: column;\n\n    }\n}\n\n</style>"]},"metadata":{},"sourceType":"module"}