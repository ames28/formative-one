{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"result-list\"\n};\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = [\"src\"];\nconst _hoisted_5 = {\n  key: 1,\n  class: \"fas fa-image\"\n};\n\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"footer\", null, [/*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-chevron-right\"\n})], -1\n/* HOISTED */\n);\n\nconst _hoisted_7 = {\n  ref: \"infinitescrolltrigger\",\n  id: \"scroll-trigger\"\n};\nconst _hoisted_8 = {\n  key: 0,\n  class: \"fas fa-spinner fa-spin\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_SearchBar = _resolveComponent(\"SearchBar\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_SearchBar), _createElementVNode(\"div\", _hoisted_2, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.articles, (article, index) => {\n    return _openBlock(), _createElementBlock(\"article\", {\n      key: index,\n      onClick: $event => $options.navTo(article.url)\n    }, [_createElementVNode(\"header\", null, [article.urlToImage ? (_openBlock(), _createElementBlock(\"img\", {\n      key: 0,\n      src: article.urlToImage,\n      alt: \"\"\n    }, null, 8\n    /* PROPS */\n    , _hoisted_4)) : (_openBlock(), _createElementBlock(\"i\", _hoisted_5)), _createElementVNode(\"h2\", null, _toDisplayString(article.title), 1\n    /* TEXT */\n    ), _createElementVNode(\"h5\", null, _toDisplayString(article.author) + \" || \" + _toDisplayString(article.source.name), 1\n    /* TEXT */\n    ), _createElementVNode(\"p\", null, _toDisplayString(article.description), 1\n    /* TEXT */\n    )]), _hoisted_6], 8\n    /* PROPS */\n    , _hoisted_3);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))]), _createElementVNode(\"div\", _hoisted_7, [$data.showLoader ? (_openBlock(), _createElementBlock(\"i\", _hoisted_8)) : _createCommentVNode(\"v-if\", true)], 512\n  /* NEED_PATCH */\n  )]);\n}","map":{"version":3,"mappings":";;EACSA,KAAK,EAAC;;;EAEFA,KAAK,EAAC;;;;;;EAIWA,KAAK,EAAC;;;gCAMpBC,oBAES,QAFT,EAES,IAFT,EAES,cADTA,oBAAoC,GAApC,EAAoC;EAAjCD,KAAK,EAAC;AAA2B,CAApC,CACS,CAFT;;AAAA;;;EAKHE,GAAG,EAAC;EAAwBC,EAAE,EAAC;;;;EACXH,KAAK,EAAC;;;;;uBAlBnCI,oBAqBM,KArBN,cAqBM,CApBFC,aAAaC,oBAAb,CAoBE,EAnBFL,oBAcM,KAdN,cAcM,oBAbHG,oBAYUG,SAZV,EAYU,IAZV,EAYUC,YAZ0BC,aAY1B,EAZkC,CAA3BC,OAA2B,EAAlBC,KAAkB,KAAb;yBAA/BP,oBAYU,SAZV,EAYU;MAZqCQ,GAAG,EAAED,KAY1C;MAZkDE,OAAK,YAAEC,eAAMJ,OAAO,CAACK,GAAd;IAYzD,CAZV,GACKd,oBAMS,QANT,EAMS,IANT,EAMS,CALMS,OAAO,CAACM,4BAAnBZ,oBAAgE,KAAhE,EAAgE;YAAA;MAAhCa,GAAG,EAAEP,OAAO,CAACM,UAAmB;MAAPE,GAAG,EAAC;IAAG,CAAhE;;IAAA,gCACAd,oBAAmC,GAAnC,cAIK,EAHLH,oBAA0B,IAA1B,EAA0B,IAA1B,EAA0BkB,iBAApBT,OAAO,CAACU,KAAY,CAA1B,EAAmB;IAAA;IAAnB,CAGK,EAFLnB,oBAAsD,IAAtD,EAAsD,IAAtD,EAAsDkB,iBAAhDT,OAAO,CAACW,MAAwC,IAAhC,MAAgC,GAA5BF,iBAAET,OAAO,CAACY,MAAR,CAAeC,IAAjB,CAA1B,EAA+C;IAAA;IAA/C,CAEK,EADLtB,oBAA8B,GAA9B,EAA8B,IAA9B,EAA8BkB,iBAAzBT,OAAO,CAACc,WAAiB,CAA9B,EAAwB;IAAA;IAAxB,CACK,CANT,GAQAC,WATL;;IAAA;GAYU,CAZV;;EAAA,CAaG,EAdN,CAmBE,EAJFxB,oBAGM,KAHN,cAGM,CAFOyB,kCAATtB,oBAAwD,GAAxD,kDAEE,CAHN;;EAAA,CAIE,CArBN","names":["class","_createElementVNode","ref","id","_createElementBlock","_createVNode","_component_SearchBar","_Fragment","_renderList","_ctx","article","index","key","onClick","$options","url","urlToImage","src","alt","_toDisplayString","title","author","source","name","description","_hoisted_6","$data"],"sourceRoot":"","sources":["/Users/amyweb/Documents/GitHub/formative-one/src/components/News.vue"],"sourcesContent":["<template>\n    <div class=\"container\">\n        <SearchBar />\n        <div class=\"result-list\">\n           <article v-for=\"(article, index) in articles\" :key=\"index\" @click=\"navTo(article.url)\">\n                <header>\n                    <img v-if=\"article.urlToImage\" :src=\"article.urlToImage\" alt=\"\">\n                    <i v-else class=\"fas fa-image\"></i>\n                    <h2>{{article.title}}</h2>\n                    <h5>{{article.author}} || {{article.source.name}}</h5>\n                    <p>{{article.description}}</p>\n                </header>\n                \n                <footer>\n                <i class=\"fas fa-chevron-right\"></i>\n                </footer>\n           </article>\n        </div>\n        <div ref=\"infinitescrolltrigger\" id=\"scroll-trigger\">\n            <i v-if=\"showLoader\" class=\"fas fa-spinner fa-spin\"></i>\n\n        </div>\n    </div>\n</template>\n\n<script>\n\nimport SearchBar from './components/Search.vue'\n\nexport default{\n    name: 'NewsApp',\n    props: ['apiKey'],\n    data(){\n        return{\n            // apiUrl: '',\n            // isBusy: false,\n            showLoader: false,\n            // currentPage: 1,\n            // totalResults: 0,\n            // maxPerPage: 20,\n            // searchword: '',\n            // articles: [],\n            // country: 'nz',\n        }\n    },\n    computed:{\n        pageCount(){\n            return Math.ceil(this.totalResults/this.maxPerPage);\n        }\n    },\n    methods: {\n        navTo(url){\n            window.open(url);\n        },\n        // resetData(){\n        // this.currentPage = 1;\n        // this.articles = [];\n        // },\n        // fetchSearchNews() {\n        //     if(this.searchword !== '') {\n        //         this.apiUrl = 'https://newsapi.org/v2/everything?q=' + this.searchword + '&pageSize=' + this.maxPerPage + '&apiKey=' + this.apiKey;\n        //         this.isBusy = true;\n\n        //         this.resetData();\n        //         this.fetchData();\n        //     }\n        //     else{\n        //         this.fetchTopNews();\n        //     }\n            \n        // },\n        fetchTopNews() {\n            this.apiUrl = 'https://newsapi.org/v2/top-headlines?country=' + this.country + '&pageSize=' + this.maxPerPage + '&apiKey=' + this.apiKey;\n            this.isBusy = true;\n            this.searchword = '';\n\n            this.resetData();\n            this.fetchData();\n        },\n        fetchData(){\n            let req = new Request(this.apiUrl + '&page=' + this.currentPage);\n            fetch(req)\n                .then((resp) => resp.json())\n                .then((data) => {\n                    this.totalResults = data.totalResults;\n                    data.articles.forEach(element => {\n                        this.articles.push(element);\n                    });\n                    this.isBusy = false;\n                    this.showLoader = false;\n                })\n                // .catch((error) => {\n                //     console.log('Error');\n                // })\n        },\n        scrollTrigger(){\n            const observer = new IntersectionObserver((entries) => {\n                entries.forEach(entry => {\n                    if(entry.intersectionRatio > 0 && this.currentPage < this.pageCount) {\n                        this.showLoader = true;\n                        this.currentPage += 1;\n                        this.fetchData();\n                    }\n                })\n            });\n\n            observer.observe(this.$refs.infinitescrolltrigger);\n        }\n    },\n    created() {\n        this.fetchTopNews();\n    },\n    mounted(){\n        this.scrollTrigger();\n    },\n    components: {\n    SearchBar\n  }\n}\n\n</script>\n\n<style>\n\n</style>"]},"metadata":{},"sourceType":"module"}